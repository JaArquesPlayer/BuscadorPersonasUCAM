<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
  <meta http-equiv="x-ua-compatible" content="ie=edge"/>
  <link rel="shortcut icon" th:href="@{/assets/img/escudo-ucam.svg}"  type="image/x-icon"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

  <!-- Metadata -->

  <title th:text="${persona.nombre_mostrar} + ' | UCAM Universidad Católica de Murcia'"></title>
  <meta property='og:title' th:content="${persona.nombre_mostrar} + ' | UCAM Universidad Católica de Murcia'"/>
  <meta name='twitter:title' th:content="${persona.nombre_mostrar} + ' | UCAM Universidad Católica de Murcia'"/>

  <!--todo mostrar y manejar cargos-->
  <!--<meta th:if="${persona.cargos != null && persona.ubicacion != null}" name='description' th:content="${persona.nombre_mostrar} + ' | ' + ${persona.cargos[0].nombre} + ' ' + ${persona.nombre_mostrar} + ' | ' + ${persona.ubicacion}"/>-->
  <meta th:if="${persona.ubicacion != null}" name='description' th:content="${persona.nombre_mostrar} + ' | ' + ${persona.ubicacion}"/>

  <meta th:if="${persona.cargos != null}" property='og:description' th:content="${persona.nombre_mostrar} + ' | ' + ${persona.ubicacion}"/>
  <meta th:if="${persona.ubicacion != null}" property='og:description' th:content="${persona.nombre_mostrar} + ' | ' + ${persona.ubicacion}"/>

  <meta name='twitter:description' th:content="${persona.nombre_mostrar} + ' | ' + ${persona.ubicacion}"/>

  <link rel='canonical' th:href="@{https://personas.ucam.edu/personas/perfil/${persona.id}}"/>
  <meta property='og:url' th:content="@{https://personas.ucam.edu/personas/perfil/${persona.id}}"/>
  <meta name='twitter:url' th:content="@{https://personas.ucam.edu/personas/perfil/${persona.id}}"/>

  <!--Constant metadata-->
  <meta property='og:type' content='website'/>
  <meta property="fb:app_id" content="501593976526558" />
  <!--End of constant metadata-->

  <meta property="og:image" th:content="'data:image/jpeg;base64,'  + ${persona.foto}"/>
  <meta name="twitter:image" th:content="${persona.foto}"/>
  <!-- End of Metadata -->

  <link th:href="@{/assets/plugins/ucam-icons/styles.css}" rel="stylesheet"/>
  <link th:href="@{/assets/css/swiper.min.css}" rel="stylesheet"/>
  <link th:href="@{/assets/css/main.css}" rel="stylesheet"/>
</head>

<body>

<header>
  <nav class="navbar navbar-light bg-info justify-content-end">
    <a class="navbar-brand mr-auto" href="/">
      <img class="img-fluid" th:src="@{/assets/img/logo.svg}" width="200" height="50" alt="Logo UCAM Personas">
    </a>
  </nav>

</header>

<article class="profile">

  <!-- portada -->
  <section>
    <div class="hero bg-ucam-gray-light">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12 col-md-6 col-lg-5 order-md-2 d-flex justify-content-center align-items-end">
            <img th:if="${persona.foto != null && persona.foto != ''}" th:src="'data:image/jpeg;base64,' + ${persona.foto}" th:alt="${persona.nombre_mostrar}" class="img-fluid">
            <img th:unless="${persona.foto != null && persona.foto != ''}" th:src="@{/assets/img/sinfoto.jpg}" th:alt="${persona.nombre_mostrar}" class="img-fluid">
          </div>
          <div class="col-12 col-md-6 col-lg-5 order-md-1 profile__contact-data d-flex flex-column">
            <a id="btn-back" onclick="history.back()" class="back-link mt-3 d-none d-md-block" title="Volver atrás">< Volver atrás</a>

            <!-- datos escritorio -->
            <div class="data-wrapper flex-1 flex-column justify-content-center d-none d-md-flex">
              <h2 class="text-size-titulo1 font-weight-bold mt-5 mt-md-0" th:text="${persona.nombre_mostrar}"></h2>

              <!--todo mostrar cargos-->
              <h4 class="text-size-subtitulo1"><i th:if="${persona.cargos != null}"></i>
              </h4>

              <p th:if="${persona.correos_institucionales != null}">
                <span th:each="c_institucional : ${persona.correos_institucionales}" th:if="${c_institucional != ''}" class="icon-email">
                  <a th:href="'mailto:' + ${c_institucional}" th:title="'Enviar correo a ' + ${c_institucional}" th:text="${c_institucional}"></a>
                </span>
              </p>

              <p th:if="${persona.correos_personales != null}">
                <span th:each="c_personal : ${persona.correos_personales}" th:if="${c_personal != ''}" class="icon-email">
                  <a th:href="'mailto:' + ${c_personal}" th:title="'Enviar correo a ' + ${c_personal}" th:text="${c_personal}"></a>
                </span>
              </p>

              <p th:if="${persona.telefonos != null}">
                <span th:each="telefono : ${persona.telefonos}" th:if="${telefono != ''}" class="icon-phone">
                  <a th:href="'tel:' + ${telefono}" th:title="'Llamar al teléfono ' + ${telefono}" th:text="${telefono} + ' ' + ${persona.extension}"></a>
                </span>
              </p>

              <p th:if="${persona.ubicacion != null && persona.ubicacion != ''}">
                <span class="icon-briefcase">
                  <a th:href="${persona.ubicacion}" th:title="${persona.ubicacion}" th:text="${persona.ubicacion}"></a>
                </span>
              </p>

              <ul class="list-inline mt-2">
                <li th:if="${persona.instagram != null && persona.instagram != ''}" class="list-inline-item text-size-titulo2">
                  <a class="decoration-none" th:href="${persona.instagram}" title="Instagram">
                    <i class="icon-instagram"></i>
                  </a>
                </li>
                <li th:if="${persona.linkedin != null && persona.linkedin != ''}" class="list-inline-item text-size-titulo2">
                  <a class="decoration-none" th:href="${persona.linkedin}" title="LinkedIn">
                    <i class="icon-linkedin"></i>
                  </a>
                </li>
                <li th:if="${persona.twitter != null && persona.twitter != ''}"  class="list-inline-item text-size-titulo2">
                  <a class="decoration-none" th:href="${persona.twitter}" title="LinkedIn">
                    <i class="icon-twitter"></i>
                  </a>
                </li>
              </ul>
            </div>
            <!-- end datos escritorio -->

          </div>
        </div>
      </div>
    </div>


    <!-- datos móvil -->
    <div class="container d-block d-md-none">
      <div class="row">
        <div class="col-12 profile__contact-data">
          <h2 class="text-size-titulo1 font-weight-bold mt-4 mt-md-0" th:text="${persona.nombre_mostrar}"></h2>
          <h4 class="text-size-subtitulo1"><i th:if="${persona.cargos != null}"></i></h4> <!--todo-->

          <p th:if="${persona.correos_institucionales != null}">
            <span th:each="c_institucional : ${persona.correos_institucionales}" th:if="${c_institucional != ''}" class="icon-email">
              <a th:href="'mailto:' + ${c_institucional}" th:title="'Enviar correo a ' + ${c_institucional}" th:text="${c_institucional}"></a>
            </span>
          </p>

          <p th:if="${persona.correos_personales != null}">
            <span th:each="c_personal : ${persona.correos_personales}" th:if="${c_personal != ''}" class="icon-email">
              <a th:href="'mailto:' + ${c_personal}" th:title="'Enviar correo a ' + ${c_personal}" th:text="${c_personal}"></a>
            </span>
          </p>

          <p th:if="${persona.telefonos != null}">
            <span th:each="telefono : ${persona.telefonos}" th:if="${telefono != ''}" class="icon-phone">
              <a th:href="'tel:' + ${telefono}" th:title="'Llamar al teléfono ' + ${telefono}" th:text="${telefono} + ' ' + ${persona.extension}"></a>
            </span>
          </p>

          <p th:if="${persona.ubicacion != null && persona.ubicacion != ''}">
            <span class="icon-room">
              <a th:href="${persona.ubicacion}" th:title="${persona.ubicacion}" th:text="${persona.ubicacion}"></a>
            </span>
          </p>

          <ul class="list-inline mt-2">
            <li th:if="${persona.instagram != null && persona.instagram != ''}" class="list-inline-item text-size-titulo2">
              <a class="decoration-none" th:if="${persona.instagram != null}" th:href="${persona.instagram}" title="Instagram">
                <i class="icon-instagram"></i>
              </a>
            </li>
            <li th:if="${persona.linkedin != null && persona.linkedin != ''}" class="list-inline-item text-size-titulo2">
              <a class="decoration-none" th:if="${persona.linkedin != null}" th:href="${persona.linkedin}" title="LinkedIn">
                <i class="icon-linkedin"></i>
              </a>
            </li>
            <li th:if="${persona.twitter != null && persona.twitter != ''}" class="list-inline-item text-size-titulo2">
              <a class="decoration-none" th:if="${persona.twitter != null}" th:href="${persona.twitter}" title="LinkedIn">
                <i class="icon-linkedin"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- end datos móvil -->
  </section>
  <!-- end portada -->

  <!-- contenido -->
  <section class="profile__content">

    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12">

          <!-- inicio tabs -->
          <div id="profile-tabs" class="swiper-container">
            <ul class="nav nav-tabs nav-justified swiper-wrapper" id="results" role="tablist">
              <!--th:if="${informacionGeneral != null}"-->
              <li class="nav-item swiper-slide">
                <a class="nav-link active" data-toggle="tab" role="tab" aria-controls="" aria-selected="true" id="informacion-tab" href="#informacion">Información general</a>
              </li>
              <!--th:if="${publicaciones != null}" -->
              <li class="nav-item swiper-slide">
                <a class="nav-link" data-toggle="tab" role="tab" aria-controls="" aria-selected="false" id="publicaciones-tab" href="#publicaciones">Publicaciones</a>
              </li>
              <!--th:if="${proyectosCompetitivos != null}" -->
              <li class="nav-item swiper-slide">
                <a class="nav-link" data-toggle="tab" role="tab" aria-controls="" aria-selected="false" id="proyectos-competitivos-tab" href="#proyectos-competitivos">Proyectos Competitivos</a>
              </li>
              <!--th:if="${proyectosNoCompetitivos != null}" -->
              <li class="nav-item swiper-slide">
                <a class="nav-link" data-toggle="tab" role="tab" aria-controls="" aria-selected="false" id="proyectos-no-competitivos-tab" href="#proyectos-no-competitivos">Proyectos Competitivos</a>
              </li>
              <!--th:if="${docenciaImpartida != null}" -->
              <li class="nav-item swiper-slide">
                <a class="nav-link" data-toggle="tab" role="tab" aria-controls="" aria-selected="false" id="docencia-tab" href="#docencia">Docencia impartida en los últimos años</a>
              </li>
            </ul>
          </div>
          <!-- end tabs -->

          <!-- contenido tabs -->
          <div class="tab-content">

            <!--informacion general-->
            <div class="tab-pane fade show active" id="informacion" role="tabpanel" aria-labelledby="informacion-tab">

              <!--formacion-->
              <div th:if="${not #lists.isEmpty(persona.titulaciones_profesor)}">
                <h3 class="text-size-subtitulo1" th:text="'Formación'"></h3>

                <ul th:if="${persona.titulaciones_alumno != null} " th:each="titulacion_alumno : ${persona.titulaciones_alumno}" th:text="Formación como alumno">
                  <li th:text="${titulacion_alumno.nombreEstudio}"></li>
                </ul>
                <ul th:if="${persona.titulaciones_profesor != null} " th:each="titulacion_profesor : ${persona.titulaciones_profesor}" th:text="Formación como profesor">
                  <li th:text="${titulacion_profesor.nombreEstudio}"></li>
                </ul>
              </div>
              <!--end of formacion-->

              <!--grupos de investigacion-->
              <h3 th:if="${not #lists.isEmpty(persona.grupos_investigacion)}" class="text-size-subtitulo1">Grupos de investigación</h3>
              <ul th:each="grupo_investigacion : ${persona.grupos_investigacion}">
                <li th:text="${grupo_investigacion.nombre}">
                  <a th:href="${grupo_investigacion.url}" th:text="${grupo_investigacion.url}"></a>
                </li>
              </ul>

              <!--personas relacionadas-->
              <h3 class="text-size-subtitulo1">Personas relacionadas</h3>
              <div id="related-profiles" th:if="${not #lists.isEmpty(personasEncontradasDepartamento)}">
                  <a th:each="persona, iter : ${personasEncontradasDepartamento}" th:if="${iter.index < 6}" th:href="'/perfil/'+${persona.id}" th:title="${persona.nombre_mostrar}" class="related-profile__wrapper">
                    <div class="profile-card">
                      <img th:if="${persona.foto != null && persona.foto != ''}" th:src="'data:image/jpeg;base64,' + ${persona.foto}" th:alt="${persona.nombre_mostrar}" class="img-fluid">
                      <img th:unless="${persona.foto != null && persona.foto != ''}" th:src="@{/assets/img/sinfoto.jpg}" th:alt="${persona.nombre_mostrar}" class="img-fluid">
                      <p class="related-profile__caption" th:text="${persona.nombre_mostrar}"></p>
                    </div>
                  </a>
              </div>
              <!--end personas relacionadas-->

              <!--todo hacer que funcione el boton-->
              <!--Boton más resultados-->
              <div class="btn-div">
                <button id="showMore" class="more-results">
                  <p>Ver más resultados</p>
                  <span class="material-symbols-outlined">expand_more</span>
                </button>
              </div>
              <!--end of boton mas resultados-->
            </div>
            <!--end of informacion general-->

            <!--todo formatear y preparar el resto de tabs-->
            <!--publicaciones-->
            <div class="tab-pane fade" id="publicaciones" role="tabpanel" aria-labelledby="publicaciones-tab">

              <h6>Aplicación de la metodología del Aula Inversa en asignaturas del Grado en Turismo</h6>
              <p>María Dolores Gil , Margarita Capdepón , Miguel Ángel Beltrán , Francisco José Noguera ,
                Ginesa Martinez , María Dolores García , Jorge López , María Fernández , Victoria Pérez
                , Mario Cava (2015)
              </p>
              <p class="text-color-ucam-gray-medium">Publicado en: <strong>La Universidad como comunidad
                de innovación y cambio</strong>, 112, 120
              </p>
            </div>
            <!--End of publicaciones-->

            <!--Proyectos competitivos-->
            <div class="tab-pane fade" id="proyectos-competitivos" role="tabpanel" aria-labelledby="proyectos-competitivos-tab">

            </div>
            <!--End of proyectos competitivos-->

            <!--Proyectos no competitivos-->
            <div  class="tab-pane fade" id="proyectos-no-competitivos" role="tabpanel" aria-labelledby="proyectos-no-competitivos-tab">

            </div>
            <!--End of proyectos competitivos-->

            <!--Docencia impartida-->
            <div class="tab-pane fade" id="docencia" role="tabpanel" aria-labelledby="docencia-tab">

            </div>
            <!--End of docencia impartida-->

          </div>
          <!-- end content tabs -->
        </div>
      </div>
    </div>

  </section>
  <!-- end contenido -->

</article>

<script th:src="@{/assets/js/vendor/jquery.slim.min.js}"></script>
<script th:src="@{/assets/js/vendor/popper.min.js}"></script>
<script th:src="@{/assets/js/vendor/bootstrap.min.js}"></script>
<script th:src="@{/assets/js/vendor/swiper.js}"></script>
<script th:src="@{/assets/js/profile.scripts.js}"></script>

<!--Script para ocultar los divs-->
<script src="//code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  $(document).ready(function() {
/*
    var numPersonasMostradas = 6;
    $("#showMore").click(function() {
      var numPersonas = $("#related-profiles > div").length;

      if (numPersonasMostradas < numPersonas) {
        $("#related-profiles > div").slice(numPersonasMostradas, numPersonasMostradas + 6).show();
        numPersonasMostradas += 6;
      }
      if (numPersonasMostradas >= numPersonas) {
        $("#showMore").hide();
      }
    });
 */

    if ($("#imformacion").children().length == 0) {
      $("#imformacion-tab").hide();
    }else {
      $("#imformacion-tab").show();
    }
    if ($("#publicaciones").children().length == 0) {
      $("#publicaciones-tab").hide();
    }else {
      $("#publicaciones-tab").show();
    };
    if ($("#proyectos-competitivos").children().length == 0) {
      $("#proyectos-competitivos-tab").hide();
    }else {
      $("#proyectos-competitivos-tab").show();
    }
    if ($("#proyectos-no-competitivos").children().length == 0) {
      $("#proyectos-no-competitivos-tab").hide();
    }else {
      $("#proyectos-no-competitivos-tab").show();
    }
    if ($("#docencia").children().length == 0) {
      $("#docencia-tab").hide();
    }else {
      $("#docencia-tab").show();
    }
  });
</script>

</body>
</html>