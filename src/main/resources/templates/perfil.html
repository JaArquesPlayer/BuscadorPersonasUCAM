<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
  <meta http-equiv="x-ua-compatible" content="ie=edge"/>
  <link rel="shortcut icon" th:href="@{/assets/img/escudo-ucam.svg}"  type="image/x-icon"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

  <!-- Metadata -->
  <title th:text="${persona.nombre_mostrar} + ' | UCAM Universidad Católica de Murcia'"></title>

  <meta name="twitter:title" th:content="${persona.nombre_mostrar} + ' | UCAM Universidad Católica de Murcia'"/>
  <meta name="twitter:description" th:if="${cargos != null}" th:content="${persona.nombre_mostrar} + ${cargos}"/>
  <meta name="twitter:image" th:content="${ruta_controller_imagen} + ${persona.id}"/>
  <meta name="twitter:site_name" content="personas.ucam" />

  <meta property='og:title' th:content="${persona.nombre_mostrar} + ' | UCAM Universidad Católica de Murcia'"/>
  <meta property="og:description" th:if="${cargos != null}" th:content="${persona.nombre_mostrar} + ${cargos}"/>
  <meta property="og:image" th:content="${ruta_controller_imagen} + ${persona.id}"/>
  <meta property="og:site_name" content="personas.ucam"/>

  <link rel='canonical' th:href="@{https://personas.ucam.edu/personas/perfil/${persona.id}}"/>
  <meta property='og:url' th:content="@{https://personas.ucam.edu/personas/perfil/${persona.id}}"/>
  <meta name='twitter:url' th:content="@{https://personas.ucam.edu/personas/perfil/${persona.id}}"/>

  <!--Constant metadata-->
  <meta property='og:type' content='website'/>
  <meta property="fb:app_id" content="501593976526558" />
  <!--End of constant metadata-->

  <link th:href="@{/assets/plugins/ucam-icons/styles.css}" rel="stylesheet"/>
  <link th:href="@{/assets/css/swiper.min.css}" rel="stylesheet"/>
  <link th:href="@{/assets/css/main.css}" rel="stylesheet"/>
</head>

<body>

<header>
  <nav class="navbar navbar-light bg-info justify-content-end">
    <a class="navbar-brand mr-auto" th:href="@{/personas}">
      <img class="img-fluid" th:src="@{/assets/img/logo.svg}" width="200" height="50" alt="Logo UCAM Personas">
    </a>
  </nav>

</header>

<article class="profile">

  <!-- portada -->
  <section>
    <div class="hero bg-ucam-gray-light">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12 col-md-6 col-lg-5 order-md-2 d-flex justify-content-center align-items-end">
            <img th:if="${persona.foto != null && persona.foto != ''}" th:src="'data:image/jpeg;base64,' + ${persona.foto}" th:alt="${persona.nombre_mostrar}" class="img-fluid">
            <img th:unless="${persona.foto != null && persona.foto != ''}" th:src="@{/assets/img/sinfoto.jpg}" th:alt="${persona.nombre_mostrar}" class="img-fluid h-100">
          </div>
          <div class="col-12 col-md-6 col-lg-5 order-md-1 profile__contact-data d-flex flex-column">
            <a id="btn-back" onclick="history.back()" class="back-link mt-3 d-none d-md-block" title="Volver atrás">< Volver atrás</a>

            <!-- datos escritorio -->
            <div class="data-wrapper flex-1 flex-column justify-content-center d-none d-md-flex">
              <h2 class="text-size-titulo1 font-weight-bold mt-5 mt-md-0" th:text="${persona.nombre_mostrar}"></h2>

              <!--todo saber si mostrar todos los cargos o con un limite para no descuadrar-->
              <h4 class="text-size-subtitulo1 mb-0" th:if="${persona.cargos != null}">
                <i class="ng-tns-c7-14">
                  <p th:each="cargo, iter : ${persona.cargos}" th:if="${iter.index <= 3}" th:text="${cargo.nombre}"></p>
                </i>
              </h4>

              <p th:if="${persona.correos_institucionales != null}">
                <span th:each="c_institucional, iter : ${persona.correos_institucionales}" th:if="${c_institucional != '' && iter.index == 0}" class="icon-email">
                  <a th:href="'mailto:' + ${c_institucional}" th:title="'Enviar correo a ' + ${c_institucional}" th:text="${c_institucional}"></a><br>
                </span>
              </p>

              <p th:if="${persona.correos_personales != null}">
                <span th:each="c_personal, iter : ${persona.correos_personales}" th:if="${c_personal != '' && iter.index == 0}" class="icon-email">
                  <a th:href="'mailto:' + ${c_personal}" th:title="'Enviar correo a ' + ${c_personal}" th:text="${c_personal}"></a><br>
                </span>
              </p>

              <p class="ng-tns-c10-22 ng-star-inserted" th:if="${persona.telefonos != null || persona.extension != null}">
                <i th:if="${persona.telefonos != null && persona.telefonos[0] != ''}" class="icon-phone"></i>
                <a th:if="${persona.telefonos != null && persona.telefonos[0] != ''}" class="ng-tns-c10-22" th:href="'tel:' + ${persona.telefonos[0]}" th:title="${'Llamar al teléfono ' + persona.telefonos[0]}" th:text="${persona.telefonos[0]}"></a>
                <a th:if="${persona.extension != null && persona.extension != ''}" class="ng-tns-c10-22" th:href="'tel:' + ${persona.extension}" th:title="${'Llamar a la extensión ' + persona.extension}" th:text="${' - Ext. ' + persona.extension}"></a>
              </p>

              <p th:if="${persona.ubicacion != null && persona.ubicacion != ''}">
                <span class="icon-briefcase">
                  <a th:href="${persona.ubicacion}" th:title="${persona.ubicacion}" th:text="${persona.ubicacion}"></a>
                </span>
              </p>

              <ul class="list-inline mt-2">
                <li th:if="${persona.web != null && persona.web != ''}" class="list-inline-item text-size-titulo2">
                  <a class="decoration-none" target="_blank" th:href="${persona.web}" title="Web">
                    <i class="icon-web-2"></i>
                  </a>
                </li>
                <li th:if="${persona.instagram != null && persona.instagram != ''}" class="list-inline-item text-size-titulo2">
                  <a class="decoration-none" target="_blank" th:href="${persona.instagram}" title="Instagram">
                    <i class="icon-instagram"></i>
                  </a>
                </li>
                <li th:if="${persona.linkedin != null && persona.linkedin != ''}" class="list-inline-item text-size-titulo2">
                  <a class="decoration-none" target="_blank" th:href="${persona.linkedin}" title="LinkedIn">
                    <i class="icon-linkedin"></i>
                  </a>
                </li>
                <li th:if="${persona.twitter != null && persona.twitter != ''}"  class="list-inline-item text-size-titulo2">
                  <a class="decoration-none" target="_blank" th:href="${persona.twitter}" title="LinkedIn">
                    <i class="icon-twitter"></i>
                  </a>
                </li>
              </ul>
            </div>
            <!-- end datos escritorio -->
          </div>
        </div>
      </div>
    </div>


    <!-- datos móvil -->
    <div class="container d-block d-md-none">
      <div class="row">
        <div class="col-12 profile__contact-data">
          <h2 class="text-size-titulo1 font-weight-bold mt-4 mt-md-0" th:text="${persona.nombre_mostrar}"></h2>

          <!--todo saber si mostrar todos los cargos o con un limite para no descuadrar-->
          <h4 class="text-size-subtitulo1 mb-0" th:if="${persona.cargos != null}">
            <i class="ng-tns-c7-14">
              <p th:each="cargo, iter : ${persona.cargos}" th:if="${iter.index <= 3}" th:text="${cargo.nombre}"></p>
            </i>
          </h4>

          <p th:if="${persona.correos_institucionales != null}">
            <span th:each="c_institucional, iter : ${persona.correos_institucionales}" th:if="${c_institucional != '' && iter.index == 0}" class="icon-email">
              <a th:href="'mailto:' + ${c_institucional}" th:title="'Enviar correo a ' + ${c_institucional}" th:text="${c_institucional}"></a>
            </span>
          </p>

          <p th:if="${persona.correos_personales != null}">
            <span th:each="c_personal, iter : ${persona.correos_personales}" th:if="${c_personal != '' && iter.index == 0}" class="icon-email">
              <a th:href="'mailto:' + ${c_personal}" th:title="'Enviar correo a ' + ${c_personal}" th:text="${c_personal}"></a>
            </span>
          </p>

          <p class="ng-tns-c10-22 ng-star-inserted" th:if="${persona.telefonos != null || persona.extension != null}">
            <i th:if="${persona.telefonos != null && persona.telefonos[0] != ''}" class="icon-phone"></i>
            <a th:if="${persona.telefonos != null && persona.telefonos[0] != ''}" class="ng-tns-c10-22" th:href="'tel:' + ${persona.telefonos[0]}" th:title="${'Llamar al teléfono ' + persona.telefonos[0]}" th:text="${persona.telefonos[0]}"></a>
            <a th:if="${persona.extension != null && persona.extension != ''}" class="ng-tns-c10-22" th:href="'tel:' + ${persona.extension}" th:title="${'Llamar a la extensión ' + persona.extension}" th:text="${' - Ext. ' + persona.extension}"></a>
          </p>

          <p th:if="${persona.ubicacion != null && persona.ubicacion != ''}">
            <span class="icon-room">
              <a th:href="${persona.ubicacion}" th:title="${persona.ubicacion}" th:text="${persona.ubicacion}"></a>
            </span>
          </p>

          <ul class="list-inline mt-2">
            <li th:if="${persona.instagram != null && persona.instagram != ''}" class="list-inline-item text-size-titulo2">
              <a class="decoration-none" th:if="${persona.instagram != null}" target="_blank" th:href="${persona.instagram}" title="Instagram">
                <i class="icon-instagram"></i>
              </a>
            </li>
            <li th:if="${persona.linkedin != null && persona.linkedin != ''}" class="list-inline-item text-size-titulo2">
              <a class="decoration-none" th:if="${persona.linkedin != null}" target="_blank" th:href="${persona.linkedin}" title="LinkedIn">
                <i class="icon-linkedin"></i>
              </a>
            </li>
            <li th:if="${persona.twitter != null && persona.twitter != ''}" class="list-inline-item text-size-titulo2">
              <a class="decoration-none" th:if="${persona.twitter != null}" target="_blank" th:href="${persona.twitter}" title="LinkedIn">
                <i class="icon-linkedin"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- end datos móvil -->
  </section>
  <!-- end portada -->

  <!-- contenido -->
  <section class="profile__content">

    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12">

          <!-- inicio tabs -->
          <div id="profile-tabs" class="swiper-container">
            <ul class="nav nav-tabs nav-justified swiper-wrapper" id="results" role="tablist">

              <li class="nav-item swiper-slide" th:if="${not #lists.isEmpty(personasEncontradasDepartamento)}">
                <a class="nav-link active" data-toggle="tab" role="tab" aria-controls="" aria-selected="true" id="informacion-tab" href="#informacion">Información general</a>
              </li>

              <li class="nav-item swiper-slide" th:if="${persona.publicaciones != null}">
                <a class="nav-link" data-toggle="tab" role="tab" aria-controls="" aria-selected="false" id="publicaciones-tab" href="#publicaciones">Publicaciones</a>
              </li>

              <li class="nav-item swiper-slide" th:if="${persona.proyectos != null}">
                <a class="nav-link" data-toggle="tab" role="tab" aria-controls="" aria-selected="false" id="proyectos-competitivos-tab" href="#proyectos-competitivos">Proyectos competitivos</a>
              </li>

              <li class="nav-item swiper-slide" th:if="${persona.proyectos != null}">
                <a class="nav-link" data-toggle="tab" role="tab" aria-controls="" aria-selected="false" id="proyectos-no-competitivos-tab" href="#proyectos-no-competitivos">Proyectos no competitivos</a>
              </li>

              <li class="nav-item swiper-slide" th:if="${persona.docencia != null}">
                <a class="nav-link" data-toggle="tab" role="tab" aria-controls="" aria-selected="false" id="docencia-tab" href="#docencia">Docencia</a>
              </li>
            </ul>
          </div>
          <!-- end tabs -->

          <!-- contenido tabs -->
          <div class="tab-content">

            <!--informacion general-->
            <div class="tab-pane fade show active" id="informacion" role="tabpanel" aria-labelledby="informacion-tab">
              <!--areas de conocimiento-->
              <h3 th:if="${not #lists.isEmpty(persona.areas_conocimiento)}" class="text-size-subtitulo1">Áreas de conocimiento</h3>
              <ul th:each="area_conocimiento : ${persona.areas_conocimiento}">
                <li th:text="${area_conocimiento}"><a th:text="${area_conocimiento}"></a></li>
              </ul>
              <!--end fo mareas de conocimiento-->

              <!--sobre mi-->
              <div th:if="${not #lists.isEmpty(persona.frase) || not #lists.isEmpty(persona.sobre_mi)}">
                <h3 class="text-size-subtitulo1" th:text="'Sobre mi'"></h3>
                <p class="ng-tns-c3-4" th:text="${persona.sobre_mi}"></p>

                <div class="sobremi_frase ng-tns-c3-4 ng-star-inserted">
                  <div class=" comillas_frase_start" style="display: inline-block">"</div>
                  <div class="frase" th:text="${persona.frase}" style="display: inline-block"></div>
                  <div class="comillas_frase_end" style="display: inline-block">"</div>
                  <div class="autor ng-tns-c3-4 ng-star-inserted">
                    <p class="ng-tns-c3-4" th:text="' - ' + ${persona.autor_frase} + ' - '"></p></div>
                </div>
              </div>
              <!--end of sobre mi-->

              <!--formacion-->
              <div th:if="${not #lists.isEmpty(persona.formacion)}">
                <h3 class="text-size-subtitulo1" th:text="'Formación'"></h3>

                <ul th:if="${persona.formacion != null}">
                  <li th:each="formacion : ${persona.formacion}" th:text="${formacion}"></li>
                </ul>
              </div>
              <!--end of formacion-->

              <!--grupos de investigacion-->
              <h3 th:if="${persona.grupos_investigacion != null}" class="text-size-subtitulo1">Grupos de investigación</h3>
              <ul th:each="grupo_investigacion : ${persona.grupos_investigacion}">
                <li>
                  <a th:href="${grupo_investigacion.url}" th:text="${grupo_investigacion.nombre}"></a>
                </li>
              </ul>
              <!--end of grupos de investigacion-->

              <!--personas relacionadas-->
              <h3 class="text-size-subtitulo1">Personas relacionadas</h3>
              <div id="related-profiles" th:if="${not #lists.isEmpty(personasEncontradasDepartamento)}">
                <a th:each="persona, iter : ${personasEncontradasDepartamento}" th:if="${iter.index < 6}" th:href="'/prueba/perfil/'+${persona.id}" th:title="${persona.nombre_mostrar}" class="related-profile__wrapper">
                  <div class="profile-card">
                    <img th:if="${persona.foto != null && persona.foto != ''}" th:src="'data:image/jpeg;base64,' + ${persona.foto}" th:alt="${persona.nombre_mostrar}" class="img-fluid">
                    <img th:unless="${persona.foto != null && persona.foto != ''}" th:src="@{/assets/img/sinfoto.jpg}" th:alt="${persona.nombre_mostrar}" class="img-fluid">
                    <p class="related-profile__caption" th:text="${persona.nombre_mostrar}"></p>
                  </div>
                </a>
                <a th:each="persona, iter : ${personasEncontradasDepartamento}" th:if="${iter.index >= 6}" th:href="'/prueba/perfil/'+${persona.id}" th:title="${persona.nombre_mostrar}" class="related-profile__wrapper d-none ver-mas">
                  <div class="profile-card">
                    <img th:if="${persona.foto != null && persona.foto != ''}" th:src="'data:image/jpeg;base64,' + ${persona.foto}" th:alt="${persona.nombre_mostrar}" class="img-fluid">
                    <img th:unless="${persona.foto != null && persona.foto != ''}" th:src="@{/assets/img/sinfoto.jpg}" th:alt="${persona.nombre_mostrar}" class="img-fluid">
                    <p class="related-profile__caption" th:text="${persona.nombre_mostrar}"></p>
                  </div>
                </a>
              </div>
              <!--end personas relacionadas-->

              <!--Boton más resultados-->
              <div class="btn-div" th:if="${#lists.size(personasEncontradasDepartamento) > 6}">
                <button id="showMore" class="more-results">
                  <p>Ver más resultados</p>
                  <span class="material-symbols-outlined">expand_more</span>
                </button>
              </div>
              <!--end of boton mas resultados-->
            </div>
            <!--end of informacion general-->

            <!--publicaciones-->
            <div class="tab-pane fade" id="publicaciones" role="tabpanel" aria-labelledby="publicaciones-tab">
              <!--item-->
              <div class="col-12 ng-tns-c11-32 ng-star-inserted" th:each="publicacion : ${persona.publicaciones}">
                <div class="titulo_publicacion mb-3">
                  <a class="font-weight-bold ng-tns-c11-32 ng-star-inserted" target="_blank" th:href="${publicacion.url}" th:text="${publicacion.titulo}"></a>
                </div>

                <div class="resultados_autores">
                  <p th:each="autor, status : ${publicacion.autores}" th:if="${autor.nombreCompleto != null}" style="display: inline-block" class="ng-tns-c11-32 ng-star-inserted autor" th:text="${autor.nombreCompleto} + ${status.last ? '' : ',&nbsp;'}"></p>
                  <p th:each="autor, status : ${publicacion.autores}" th:unless="${autor.nombreCompleto != null}" style="display: inline-block" class="ng-tns-c11-32 ng-star-inserted autor" th:text="${autor.nombre} + ${status.last ? '' : ',&nbsp;'}"></p>
                </div>

                <p class="text-color-ucam-gray-medium revista ng-tns-c3-4 ng-star-inserted" th:text="'Publicado en: ' + ${publicacion.editorial} + ', ' +${publicacion.paginaInicio} + ', ' + ${publicacion.paginaFinal}">
                  <strong class="ng-tns-c3-4" th:text="' ' + ${publicacion.editorial}"></strong>
                </p>
                <hr class="ng-tns-c11-32">
              </div>
              <!--end of item-->

            </div>
            <!--End of publicaciones-->

            <!--Proyectos competitivos-->
            <div class="tab-pane fade" id="proyectos-competitivos" role="tabpanel" aria-labelledby="proyectos-competitivos-tab">
              <!--item-->
              <div class="col-12 ng-tns-c11-32 ng-star-inserted" th:each="proyecto : ${proyectosCompetitivos}">
                <div class="titulo_publicacion mb-3">
                  <p class="font-weight-bold ng-tns-c11-32 ng-star-inserted" target="_blank" th:text="${proyecto.titulo}"></p>
                </div>

                <div class="resultados_autores">
                  <p style="display: inline-block" class="ng-tns-c11-32 ng-star-inserted autor" th:if="${proyecto.entidad != null}" th:text="${proyecto.entidad} + '.'"></p>
                  <p style="display: inline-block" class="ng-tns-c11-32 ng-star-inserted autor" th:if="${proyecto.fechaInicio != null && proyecto.fechaFin != null}" th:text="${proyecto.fechaInicio} + ', ' + ${proyecto.fechaFin} + '.'"></p>
                </div>
                <hr class="ng-tns-c11-32">
              </div>
              <!--end of item-->
            </div>
            <!--End of proyectos competitivos-->

            <!--Proyectos no competitivos-->
            <div class="tab-pane fade" id="proyectos-no-competitivos" role="tabpanel" aria-labelledby="proyectos-no-competitivos-tab">
              <!--item-->
              <div class="col-12 ng-tns-c11-32 ng-star-inserted" th:each="proyecto : ${proyectosNoCompetitivos}">
                <div class="titulo_publicacion mb-3">
                  <p class="font-weight-bold ng-tns-c11-32 ng-star-inserted" target="_blank" th:text="${proyecto.titulo}"></p>
                </div>

                <div class="resultados_autores">
                  <p style="display: inline-block" class="ng-tns-c11-32 ng-star-inserted autor" th:if="${proyecto.entidad != null}" th:text="${proyecto.entidad} + '.'"></p>
                  <p style="display: inline-block" class="ng-tns-c11-32 ng-star-inserted autor" th:if="${proyecto.fechaInicio != null && proyecto.fechaFin != null}" th:text="${proyecto.fechaInicio} + ', ' + ${proyecto.fechaFin} + '.'"></p>
                </div>
                <hr class="ng-tns-c11-32">
              </div>
              <!--end of item-->
            </div>
            <!--End of proyectos competitivos-->

            <!--Docencia impartida-->
            <div class="tab-pane fade" id="docencia" role="tabpanel" aria-labelledby="docencia-tab">
              <!--item-->
              <ul class="ng-tns-c3-4 ng-star-inserted" th:each="docencia : ${persona.docencia}">
                <li class="ng-tns-c3-4 ng-star-inserted">
                  <b class="ng-tns-c3-4" th:text="${docencia.titulacion}"></b>
                  <ul class="ng-tns-c3-4" th:each="asignatura : ${docencia.asignaturas}">
                    <li class="ng-tns-c3-4 ng-star-inserted" th:text="${asignatura.nombreAsignatura}"></li>
                  </ul>
                </li>
              </ul>
              <!--end of item-->
            </div>
            <!--end of docencia impartida-->
          </div>
          <!-- end content tabs -->
        </div>
      </div>
    </div>

  </section>
  <!-- end contenido -->

</article>

<script th:src="@{/assets/js/vendor/jquery.slim.min.js}"></script>
<script th:src="@{/assets/js/vendor/popper.min.js}"></script>
<script th:src="@{/assets/js/vendor/bootstrap.min.js}"></script>
<script th:src="@{/assets/js/vendor/swiper.js}"></script>
<script th:src="@{/assets/js/profile.scripts.js}"></script>

<script src="//code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  document.getElementById("showMore").addEventListener("click", function() {
    var personasMostradas = document.getElementsByClassName("ver-mas");
    for (var i = 0; i < 6; i++) {
      if (personasMostradas[i]) {
        personasMostradas[i].classList.remove("d-none");
      }
    }
    if (personasMostradas.length <= 6) {
      document.getElementById("showMore").classList.add("d-none");
    }
  });
</script>

</body>
</html>